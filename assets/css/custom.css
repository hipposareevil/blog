/* =========================================================
   SINGLE POSTS — FULL WIDTH CONTENT + GALLERY FIXES
   ========================================================= */

/*
  Blowfish sometimes wraps post content in `max-w-fit`
  (fit-content), which causes galleries to shrink if the
  text above is short. These rules force true full width.
*/
.article-content,
.article-content.max-w-prose,
.article-content .max-w-prose,
.article-content .max-w-fit {
  max-width: none !important;
  width: 100% !important;
}

/* Extra safety for nested wrappers used by Blowfish */
main:has(.article-content) .max-w-fit,
main:has(.article-content) .min-w-0.min-h-0.max-w-fit {
  max-width: none !important;
  width: 100% !important;
}

/* Ensure photo galleries always measure full container width */
main:has(.article-content) .justified-gallery,
main:has(.article-content) #gallery {
  width: 100% !important;
  max-width: none !important;
  display: block !important;
}


/* =========================================================
   HOME HERO — LARGER, MORE PROMINENT INTRO
   ========================================================= */

#main-content > article:first-of-type {
  padding-top: 1.5rem;
  padding-bottom: 2.5rem;
}

#main-content > article:first-of-type img.h-36.w-36 {
  width: 11rem;
  height: 11rem;
}

#main-content > article:first-of-type h1 {
  font-size: 3.25rem;
  line-height: 1.05;
}

#main-content > article:first-of-type h2 {
  font-size: 1.5rem;
}


/* =========================================================
   HOME PAGE — RECENT POSTS (CHRONOLOGICAL GRID)
   ========================================================= */

/*
  IMPORTANT:
  We intentionally do NOT use masonry or CSS columns here.
  Infinite scroll + masonry breaks chronological order.

  This grid flows LEFT → RIGHT → NEXT ROW
  and preserves correct date order.
*/
#post-list {
  display: grid !important;
  grid-template-columns: repeat(2, minmax(0, 1fr)) !important;
  grid-auto-flow: row !important;

  /* Kill any leftover masonry / column behavior */
  column-count: unset !important;
  columns: unset !important;
}

/* Mobile: single column */
@media (max-width: 767px) {
  #post-list {
    grid-template-columns: 1fr !important;
  }
}

/* Hide default Hugo pagination UI (infinite scroll replaces it) */
.pagination,
nav.pagination {
  display: none;
}


/* =========================================================
   TAXONOMY BADGES — MAKE CATEGORIES DIFFERENT FROM TAGS
   ========================================================= */

/*
  Your rendered markup is:
    <a href="/categories/...">
      <span class="flex ...">
        <span class="rounded-md border border-primary-400 ...">Label</span>
      </span>
    </a>

  The visible badge is the INNER span. Blowfish applies
  Tailwind utility classes there, so we override using:
    a[href^="/categories/"] span > span.rounded-md.border
  plus !important.
*/

/* Categories: squarish + thicker dark gray border + subtle tint */
a[href^="/categories/"] span > span.rounded-md.border {
  border-width: 2px !important;
  border-style: solid !important;
  border-color: #4b5563 !important;          /* gray-600 */
  border-radius: 0.375rem !important;        /* squarish */
  background: rgba(75, 85, 99, 0.12) !important;
  color: #374151 !important;                 /* gray-700 */
  font-weight: 700 !important;
  opacity: 1 !important;
}

/* Tags: lighter dashed border, no tint */
a[href^="/tags/"] span > span.rounded-md.border {
  border-width: 1px !important;
  border-style: dashed !important;
  border-color: rgba(115, 115, 115, 0.55) !important;
  border-radius: 0.25rem !important;
  background: transparent !important;
  color: inherit !important;
  font-weight: 500 !important;
  opacity: 0.85 !important;
}

/* Dark mode tuning */
.dark a[href^="/categories/"] span > span.rounded-md.border {
  border-color: #9ca3af !important;          /* gray-400 */
  background: rgba(156, 163, 175, 0.18) !important;
  color: #e5e7eb !important;                 /* gray-200 */
}

.dark a[href^="/tags/"] span > span.rounded-md.border {
  border-color: rgba(163, 163, 163, 0.45) !important;
}


/* =========================================================
   INFINITE SCROLL — LOAD MORE BUTTON SUPPORT
   ========================================================= */

/* Ensures the "Load more" button spans full grid width */
#load-more-wrapper {
  grid-column: 1 / -1;
}


/* Category/tag landing cards: slightly deeper hover */
a.group:hover { transform: translateY(-1px); }



/* Fantasy d20 roll */
.d20 {
  perspective: 600px;
}

.d20-svg {
  transform-origin: 50% 50%;
  transition: transform 600ms cubic-bezier(.34,1.56,.64,1);
}

a:hover .d20-svg,
button:hover .d20-svg {
  transform: rotateZ(180deg) rotateX(25deg) rotateY(-20deg);
}


/* Browse cards: responsive heights without Tailwind arbitrary classes */
.browse-card--categories { height: 240px; }
.browse-card--tags { height: 210px; }
.browse-card--archives { height: 190px; }

@media (min-width: 768px){
  .browse-card--categories { height: 280px; }
  .browse-card--tags { height: 240px; }
  .browse-card--archives { height: 210px; }
}




/* ================================
   Panoramic masonry gallery — EXTRA LARGE
   ================================ */

.pano-masonry {
  column-gap: 1.25rem;
  column-count: 1;              /* mobile: huge tiles */
}

/* tablet */
@media (min-width: 640px) {
  .pano-masonry {
    column-count: 1;            /* still single column */
  }
}

/* desktop */
@media (min-width: 1024px) {
  .pano-masonry {
    column-count: 2;            /* big, immersive */
  }
}

/* very wide screens */
@media (min-width: 1440px) {
  .pano-masonry {
    column-count: 3;            /* optional */
  }
}

.pano-masonry-item {
  display: inline-block;
  width: 100%;
  margin: 0 0 1.25rem 0;
  break-inside: avoid;
  -webkit-column-break-inside: avoid;

  border-radius: 1rem;
  overflow: hidden;
  border: 1px solid rgba(255,255,255,0.12);
  background: rgba(0,0,0,0.12);
}

.pano-masonry-img {
  display: block;
  width: 100%;
  height: auto;
  transition: transform 260ms ease;
}

.pano-masonry-item:hover .pano-masonry-img {
  transform: scale(1.03);
}
